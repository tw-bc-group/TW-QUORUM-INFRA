Name:         node1-quorum-deployment-8f8bf7949-ts585
Namespace:    default
Priority:     0
Node:         minikube/172.17.0.2
Start Time:   Sat, 18 Jul 2020 22:13:12 +0800
Labels:       app=qubernetes
              name=node1-quorum-deployment
              pod-template-hash=8f8bf7949
              tier=backend
Annotations:  <none>
Status:       Pending
IP:           172.18.0.13
IPs:
  IP:           172.18.0.13
Controlled By:  ReplicaSet/node1-quorum-deployment-8f8bf7949
Init Containers:
  quorum-genesis-init-container:
    Container ID:  docker://ac0af5a682186fcf96ddfa06ecd343a1270b270084580b10401fcd0657ba5f9f
    Image:         quorumengineering/quorum:2.5.0
    Image ID:      docker-pullable://quorumengineering/quorum@sha256:d00598ff891232dcde397c27f01e154ba29d04818befb958e1747a2c95d8b63b
    Port:          <none>
    Host Port:     <none>
    Command:
      sh
    Args:
      -cx
      if [ ! -f $QUORUM_DATA_DIR/genesis_created ]; then /usr/local/bin/geth --datadir $QUORUM_DATA_DIR init /etc/quorum/genesis/genesis-geth.json; date > $QUORUM_DATA_DIR/genesis_created; fi; cp -r /etc/quorum/qdata/contracts-tmp /etc/quorum/qdata/contracts; chmod 755  /etc/quorum/qdata/contracts/runscript.sh; chmod 755  /etc/quorum/qdata/contracts/raft_add_all_permissioned.sh; chmod 755  /etc/quorum/qdata/contracts/raft_add_node.sh; 
    State:          Waiting
      Reason:       CrashLoopBackOff
    Last State:     Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Sat, 18 Jul 2020 22:19:10 +0800
      Finished:     Sat, 18 Jul 2020 22:19:10 +0800
    Ready:          False
    Restart Count:  6
    Environment:
      QUORUM_DATA_DIR:  /etc/quorum/qdata/dd
      QHOME:            /etc/quorum/qdata
    Mounts:
      /etc/quorum/genesis/genesis-geth.json from genesis-config-persistent-storage (rw,path="genesis-geth.json")
      /etc/quorum/qdata from quorum-persistent-storage (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-xrhnx (ro)
Containers:
  tessera:
    Container ID:  
    Image:         quorumengineering/tessera:0.11
    Image ID:      
    Port:          9001/TCP
    Host Port:     0/TCP
    Command:
      sh
    Args:
      -cx
      chmod 600 $QUORUM_HOME/tm/tm.key; echo DDIR is $DDIR; printenv;
      TESSERA_VERSION=$(unzip -p /tessera/tessera-app.jar META-INF/MANIFEST.MF | grep Tessera-Version | cut -d" " -f2); echo "Tessera version (extracted from manifest file): ${TESSERA_VERSION}";
      TESSERA_VERSION="${TESSERA_VERSION}-suffix"; Tess_Ver_First=$(echo ${TESSERA_VERSION} | awk -F. '{print $1}'); Tess_Ver_Second=$(echo ${TESSERA_VERSION} | awk -F. '{print $2}'); Tess_Ver_Third=$(echo ${TESSERA_VERSION} | awk -F. '{print $3}'); echo "version: first [$Tess_Ver_First], second [$Tess_Ver_Second], third [$Tess_Ver_Third]"; echo "Tessera version - suffix ${TESSERA_VERSION}"; TESSERA_CONFIG_TYPE=;
      if [ "${Tess_Ver_Second}" -ge "8" ]; then TESSERA_CONFIG_TYPE="-enhanced"; fi; if [[ "${Tess_Ver_Second}" -ge "9" ]]; then TESSERA_CONFIG_TYPE="-9.0"; fi;
      echo Config type [${TESSERA_CONFIG_TYPE}];
      CONFIG_TMPL=$(cat ${DDIR}/tessera-config${TESSERA_CONFIG_TYPE}.json.tmpl);
      echo  " sed "s/%QUORUM-NODE1_SERVICE_HOST%/$QUORUM_NODE1_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE2_SERVICE_HOST%/$QUORUM_NODE2_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE3_SERVICE_HOST%/$QUORUM_NODE3_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE4_SERVICE_HOST%/$QUORUM_NODE4_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE5_SERVICE_HOST%/$QUORUM_NODE5_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE6_SERVICE_HOST%/$QUORUM_NODE6_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE7_SERVICE_HOST%/$QUORUM_NODE7_SERVICE_HOST/g" "; CONFIG_WITH_OTHER_HOSTS=$(echo $CONFIG_TMPL |  sed "s/%QUORUM-NODE1_SERVICE_HOST%/$QUORUM_NODE1_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE2_SERVICE_HOST%/$QUORUM_NODE2_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE3_SERVICE_HOST%/$QUORUM_NODE3_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE4_SERVICE_HOST%/$QUORUM_NODE4_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE5_SERVICE_HOST%/$QUORUM_NODE5_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE6_SERVICE_HOST%/$QUORUM_NODE6_SERVICE_HOST/g" |  sed "s/%QUORUM-NODE7_SERVICE_HOST%/$QUORUM_NODE7_SERVICE_HOST/g" ) ; CONFIG_WITH_ALL_HOSTS=$(echo $CONFIG_WITH_OTHER_HOSTS | sed "s/%THIS_SERVICE_HOST%/$QUORUM_NODE1_SERVICE_HOST/g"); PRIV_KEY=$(cat $DDIR/tm.key) PUB_KEY=$(cat $DDIR/tm.pub) CONFIG_FINAL=$(echo $CONFIG_WITH_ALL_HOSTS | sed "s-%THIS_PRIV_KEY%-${PRIV_KEY}-g" |  sed "s-%THIS_PUB_KEY%-${PUB_KEY}-g"); CONFIG_FINAL_9_0=$(echo $CONFIG_WITH_ALL_HOSTS | sed "s-%THIS_PRIV_KEY%-${DDIR}/tm.key-g" |  sed "s-%THIS_PUB_KEY%-${DDIR}/tm.pub-g"); if [[ "${Tess_Ver_Second}" -ge "9" ]]; then CONFIG_FINAL=${CONFIG_FINAL_9_0}; fi; echo $CONFIG_FINAL >  ${DDIR}/tessera-config-with-hosts.json; cat  ${DDIR}/tessera-config-with-hosts.json; java -Xms128M -Xmx128M -jar /tessera/tessera-app.jar -configfile ${DDIR}/tessera-config-with-hosts.json | tee -a ${QHOME}/logs/tessera.log; 
    State:          Waiting
      Reason:       PodInitializing
    Ready:          False
    Restart Count:  0
    Environment:
      QHOME:        /etc/quorum/qdata
      QUORUM_HOME:  /etc/quorum/qdata
      DDIR:         /etc/quorum/qdata/tm
    Mounts:
      /etc/quorum/qdata from quorum-persistent-storage (rw)
      /etc/quorum/qdata/logs from quorum-logs-persistent-storage (rw)
      /etc/quorum/qdata/tm from tm-persistent-storage (rw)
      /etc/quorum/qdata/tm/tessera-config-9.0.json.tmpl from tessera-config (rw,path="tessera-config-9.0.json.tmpl")
      /etc/quorum/qdata/tm/tessera-config-enhanced.json.tmpl from tessera-config (rw,path="tessera-config-enhanced.json.tmpl")
      /etc/quorum/qdata/tm/tessera-config.json.tmpl from tessera-config (rw,path="tessera-config.json.tmpl")
      /etc/quorum/qdata/tm/tm.key from keystore-tm (rw,path="tm.key")
      /etc/quorum/qdata/tm/tm.pub from keystore-tm (rw,path="tm.pub")
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-xrhnx (ro)
  quorum:
    Container ID:  
    Image:         quorumengineering/quorum:2.5.0
    Image ID:      
    Ports:         50401/TCP, 8546/TCP, 21000/TCP
    Host Ports:    0/TCP, 0/TCP, 0/TCP
    Command:
      sh
    Args:
      -cx
       apk add curl; apk add jq;
      sh $QHOME/permission-nodes/permissioned-update.sh; rm -r /etc/quorum/qdata/contracts-tmp; echo what in this dir; ls  $QUORUM_DATA_DIR; cat /etc/quorum/genesis/genesis-geth.json;
      chmod 644 $QUORUM_DATA_DIR/keystore/key;
      echo sleeping for 60 seconds to wait for the transaction manager to startup. sleep 60; echo transaction manager is up;
      
      touch $QUORUM_DATA_DIR/password.txt; NETWORK_ID=10 args=" --gcmode archive --raft  --raftport 50401 --rpcapi admin,db,eth,debug,miner,net,shh,txpool,personal,web3,quorum,raft "; /usr/local/bin/geth --datadir $QUORUM_DATA_DIR $args --permissioned --nodiscover --nat=none --verbosity 9 --networkid $NETWORK_ID --unlock 0 --emitcheckpoints --rpc --rpcaddr 0.0.0.0 --rpcport 8546 --port 21000 --password $QUORUM_DATA_DIR/password.txt 2>&1 | tee -a /etc/quorum/qdata/logs/quorum.log;
    State:          Waiting
      Reason:       PodInitializing
    Ready:          False
    Restart Count:  0
    Environment:
      PRIVATE_CONFIG:   /etc/quorum/qdata/tm/tm.ipc
      QUORUM_DATA_DIR:  /etc/quorum/qdata/dd
      QUORUM_HOME:      /etc/quorum/qdata
      QHOME:            /etc/quorum/qdata
      TM_HOME:          /etc/quorum/qdata/tm/
      THIS_NODE_ID:     quorum-node1
      THIS_ENODE:       ac6b1096ca56b9f6d004b779ae3728bf83f8e22453404cc3cef16a3d9b96608bc67c4b30db88e0a5a6c6390213f7acbe1153ff6d23ce57380104288ae19373ef
    Mounts:
      /etc/quorum/genesis/genesis-geth.json from genesis-config-persistent-storage (rw,path="genesis-geth.json")
      /etc/quorum/qdata from quorum-persistent-storage (rw)
      /etc/quorum/qdata/dd/geth/enode from quorum-enode (rw,path="enode")
      /etc/quorum/qdata/dd/geth/nodekey from quorum-nodekey (rw,path="nodekey")
      /etc/quorum/qdata/dd/keystore/key from quorum-key-config-persistent-storage (rw,path="key")
      /etc/quorum/qdata/logs from quorum-logs-persistent-storage (rw)
      /etc/quorum/qdata/permission-nodes from quorum-permissioned-config (rw)
      /etc/quorum/qdata/tm from tm-persistent-storage (rw)
      /geth-helpers from geth-helpers (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-xrhnx (ro)
Conditions:
  Type              Status
  Initialized       False 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  quorum-permissioned-config:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      node1-quorum-permissioned-config
    Optional:  false
  genesis-config-persistent-storage:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      node1-genesis-config
    Optional:  false
  tessera-config:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      node1-tessera-config
    Optional:  false
  keystore-tm:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      quorum-node1-tm-key-config
    Optional:  false
  quorum-key-config-persistent-storage:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      quorum-node1-account-key-config
    Optional:  false
  quorum-nodekey:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      quorum-node1-nodekey-config
    Optional:  false
  quorum-enode:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      quorum-node1-enode-config
    Optional:  false
  geth-helpers:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      node1-geth-helpers
    Optional:  false
  quorum-persistent-storage:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  quorum-node1-pvc
    ReadOnly:   false
  tm-persistent-storage:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  quorum-node1-tm-pvc
    ReadOnly:   false
  quorum-logs-persistent-storage:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  quorum-node1-log-pvc
    ReadOnly:   false
  default-token-xrhnx:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-xrhnx
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s
                 node.kubernetes.io/unreachable:NoExecute for 300s
Events:
  Type     Reason            Age                     From               Message
  ----     ------            ----                    ----               -------
  Warning  FailedScheduling  <unknown>               default-scheduler  running "VolumeBinding" filter plugin for pod "node1-quorum-deployment-8f8bf7949-ts585": pod has unbound immediate PersistentVolumeClaims
  Warning  FailedScheduling  <unknown>               default-scheduler  running "VolumeBinding" filter plugin for pod "node1-quorum-deployment-8f8bf7949-ts585": pod has unbound immediate PersistentVolumeClaims
  Normal   Scheduled         <unknown>               default-scheduler  Successfully assigned default/node1-quorum-deployment-8f8bf7949-ts585 to minikube
  Normal   Pulled            5m59s (x5 over 7m33s)   kubelet, minikube  Container image "quorumengineering/quorum:2.5.0" already present on machine
  Normal   Created           5m59s (x5 over 7m33s)   kubelet, minikube  Created container quorum-genesis-init-container
  Normal   Started           5m59s (x5 over 7m33s)   kubelet, minikube  Started container quorum-genesis-init-container
  Warning  BackOff           2m32s (x26 over 7m31s)  kubelet, minikube  Back-off restarting failed container
